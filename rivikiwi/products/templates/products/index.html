{% load static %}
{% load products_tags %}

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="{% static 'images/icons/rivikiwi-logo.svg' %}" type="image/x-icon">
    <title>RiviKiwi - Продавайте и покупайте</title>
    <link rel="stylesheet" href="{% static 'css/main-page-style.css' %}">
    <script src="{% static 'js/main-page-scripts.js' %}" defer></script>
</head>
<body>

    <!-- ХЕДЕР -->
    <header class="site-header">
        <!-- Верхний этаж -->
        <div class="container">
            <div class="header-top">
                <!-- Логотип -->
                <a href="#" class="logo">
                    <svg width="47" height="43" viewBox="0 0 47 43" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M9.61037 32.7991C10.4569 33.2225 11.0247 33.7991 11.3809 34.4226L15.9137 42.9061H22.6173L19.8224 37.6752C19.7013 37.5096 19.6028 37.3267 19.5315 37.1308C19.4462 36.8967 19.3998 36.6442 19.3998 36.381C19.3998 35.4446 19.9878 34.6444 20.8175 34.3241C21.0176 34.2468 21.2317 34.1975 21.4551 34.1809C21.4699 34.1798 21.4849 34.1788 21.4998 34.178C25.9779 33.1255 29.7889 30.3621 32.1925 26.6219C32.269 26.4723 32.3336 26.3166 32.3977 26.1623C32.5569 25.7788 32.7125 25.404 33.0371 25.1542C33.2498 24.9904 33.4934 24.8642 33.7576 24.7853C33.9607 24.7247 34.176 24.6921 34.3991 24.6921C34.52 24.6921 34.6388 24.7017 34.7545 24.7202C35.2927 24.8059 35.7663 25.0833 36.102 25.4794C36.2099 25.6067 36.3035 25.7462 36.3805 25.8956L47 41.7679L39.9435 24.6128C39.8475 24.4464 39.7728 24.2664 39.7229 24.0764C39.6761 23.8982 39.6512 23.7113 39.6512 23.5186C39.6512 22.9769 39.848 22.4808 40.1744 22.0968C40.2391 22.0207 40.3089 21.949 40.3833 21.8823C41.925 20.2462 42.8687 18.0485 42.8687 15.6321C42.8687 10.5765 38.7378 6.47817 33.642 6.47817C33.395 6.47817 33.1619 6.52531 32.9293 6.57235C32.6976 6.61919 32.4664 6.66594 32.2225 6.66594C32.1111 6.66594 32.0016 6.65781 31.8946 6.64211C31.4936 6.58331 31.1274 6.41832 30.8261 6.17687C30.705 6.0798 30.617 5.9679 30.5223 5.84765C30.4627 5.77187 30.4005 5.69277 30.3257 5.61198C27.1342 2.16237 22.5515 0 17.4598 0C7.81701 0 0 7.75535 0 17.3221C0 21.5977 0.0236507 25.877 0.0473051 30.1569C0.0709671 34.4383 0.0946329 38.7203 0.0946329 43H6.62431V30.9057C7.54837 31.6322 8.54829 32.2679 9.61037 32.7991ZM33.4151 18.2043C32.8847 18.1588 32.4331 17.9323 31.8913 17.9323C30.1213 17.9323 28.5981 18.9803 27.9176 20.485C27.8417 20.7326 27.757 20.9764 27.664 21.2161C27.5327 21.5546 27.3848 21.8848 27.2212 22.206C25.4204 25.7416 21.7255 28.1659 17.4598 28.1659C16.4453 28.1659 15.4632 28.0288 14.5311 27.7723C10.9616 26.7898 8.12653 24.0554 7.02561 20.5611C6.84213 19.9788 6.70682 19.3753 6.62431 18.7554C6.56188 18.2864 6.52967 17.8079 6.52967 17.3221C6.52967 17.2593 6.53021 17.1967 6.53128 17.1343C6.63229 11.232 11.4865 6.47817 17.4598 6.47817C20.9045 6.47817 23.9771 8.05915 25.9805 10.5296C26.2092 10.8117 26.4239 11.1053 26.6237 11.4095C26.7802 11.6477 26.9275 11.8923 27.0651 12.143C27.8581 13.206 29.1311 13.8952 30.5664 13.8952C31.0486 13.8952 31.5124 13.8174 31.9459 13.6739C32.3794 13.5303 32.6435 13.2087 33.064 13.1141C33.2499 13.0723 33.4433 13.0502 33.642 13.0502C33.9107 13.0502 34.1699 13.0906 34.4137 13.1656C35.4742 13.4918 36.2444 14.4727 36.2444 15.6321C36.2444 16.6011 35.7063 17.4455 34.9104 17.8871C34.5352 18.0953 34.1026 18.214 33.642 18.214C33.5655 18.214 33.4899 18.2107 33.4151 18.2043Z" fill="#90C825"/>
                    </svg>
                    <span class="logo-text">Rivi<span class="green-text">Kiwi</span></span>
                </a>
                <!-- Поиск -->
                <div class="search-bar">
                    <img src="{% static 'images/icons/search-icon.svg' %}">
                    <input type="text" placeholder="Что вы ищете?">
                    <div class="location-wrapper">
                        <div class="location" onclick="toggleCityMenu()" style="cursor: pointer;">
                            <span class="location-icon"><svg width="13" height="17" viewBox="0 0 13 17" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M1 6.69532C1 10.6869 4.33497 13.9876 5.81112 15.2532C6.0224 15.4343 6.12926 15.526 6.28687 15.5724C6.4096 15.6086 6.59024 15.6086 6.71297 15.5724C6.8709 15.5259 6.97705 15.4351 7.18912 15.2533C8.66525 13.9878 12 10.6872 12 6.69569C12 5.18514 11.4206 3.73629 10.3891 2.66817C9.3577 1.60006 7.95881 1 6.50012 1C5.04143 1 3.64238 1.60015 2.61092 2.66826C1.57947 3.73638 1 5.18478 1 6.69532Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M4.3 6.6151C4.3 7.85561 5.28494 8.86118 6.5 8.86118C7.71506 8.86118 8.7 7.85561 8.7 6.6151C8.7 5.37462 7.71506 4.36902 6.5 4.36902C5.28494 4.36902 4.3 5.37462 4.3 6.6151Z"  stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg></span>
                            <span class="location-text">
                                <a class="current-city">Минск</a>
                            </span>
                        </div>
                        <div class="city-dropdown" id="cityDropdown">
                            <div class="city-option" onclick="selectCity('Минск')">Минск</div>
                            <div class="city-option" onclick="selectCity('Брест')">Брест</div>
                            <div class="city-option" onclick="selectCity('Гомель')">Гомель</div>
                            <div class="city-option" onclick="selectCity('Гродно')">Гродно</div>
                            <div class="city-option" onclick="selectCity('Витебск')">Витебск</div>
                            <div class="city-option" onclick="selectCity('Могилев')">Могилев</div>
                        </div>
                    </div>
                    <button class="btn-search btn-primary">Найти</button>
                </div>
                
                <!-- Кнопки -->
                <div class="header-actions">
                    <button class="btn btn-outline">
                        <span class="add-icon-wrapper"><svg width="19" height="19" viewBox="0 0 19 19" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9.44141 0C9.99345 0.000164811 10.4412 0.44796 10.4414 1V8.14062H17.8916C18.4436 8.14094 18.8916 8.58856 18.8916 9.14062C18.8916 9.69272 18.4436 10.1403 17.8916 10.1406H10.4414V17.2734C10.4412 17.8255 9.99344 18.2733 9.44141 18.2734C8.88923 18.2734 8.44158 17.8256 8.44141 17.2734V10.1406H1C0.447715 10.1406 2.50583e-08 9.69291 0 9.14062C2.99006e-05 8.58837 0.447734 8.14062 1 8.14062H8.44141V1C8.44157 0.447858 8.88923 -2.32531e-08 9.44141 0Z"/>
                        </svg></span>
                        <span>Добавить объявление</span>
                    </button>
                    {% if not user.is_authenticated %}
                        <a href="{% url 'users:login' %}" class="btn btn-primary">
                            <svg width="15" height="18" viewBox="0 0 15 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M14 17C14 13.5636 11.0899 10.7778 7.5 10.7778C3.91015 10.7778 1 13.5636 1 17M7.5 8.11111C5.44866 8.11111 3.78571 6.51924 3.78571 4.55556C3.78571 2.59188 5.44866 1 7.5 1C9.55131 1 11.2143 2.59188 11.2143 4.55556C11.2143 6.51924 9.55131 8.11111 7.5 8.11111Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span>Войти</span>
                        </a>
                    {% else %}
                        <div class="account-wrapper" onclick="showAccountMenu()">
                            <svg width="15" height="18" viewBox="0 0 15 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M14 17C14 13.5636 11.0899 10.7778 7.5 10.7778C3.91015 10.7778 1 13.5636 1 17M7.5 8.11111C5.44866 8.11111 3.78571 6.51924 3.78571 4.55556C3.78571 2.59188 5.44866 1 7.5 1C9.55131 1 11.2143 2.59188 11.2143 4.55556C11.2143 6.51924 9.55131 8.11111 7.5 8.11111Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <div class="account-dropdown" id="accountDropdown">
                                <span class="account-name">
                                    <h3>{{ user.username }}</h3>
                                </span>
                                <div class="acc-menu-options">
                                    <a href="#" class="account-option">Профиль</a>
                                {% if user.is_staff or user.is_admin %}
                                    <a href="{% url 'admin:index' %}" class="account-option">Админ-панель</a>
                                {% endif %}
                                </div>
                                    <a href="{% url 'users:logout' %}" class="account-option exit-option">Выйти</a>
                            </div>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
        <!-- Нижний этаж (Навигация) -->
        <nav class="header-bottom">
            <div class="container categories-container">
                {% all_categories as categories %}
                {% for category in categories %}
                    <a href="{% url 'catalog:index' category.slug %}" class="cat-link">{{ category.name }}</a>
                {% endfor %}
                <!-- <a href="#" class="cat-link active">Все</a>
                <a href="#" class="cat-link">Электроника</a>
                <a href="#" class="cat-link">Недвижимость</a>
                <a href="#" class="cat-link">Авто и запчасти</a>
                <a href="#" class="cat-link">Одежда</a>
                <a href="#" class="cat-link">Дом и сад</a>
                <a href="#" class="cat-link">Услуги</a>
                <a href="#" class="cat-link">Хобби</a> -->
            </div>
        </nav>
    </header>

    <!-- ОСНОВНОЙ КОНТЕНТ -->
    <main class="container">
        
        <!-- Баннер -->
        {% if not user.is_authenticated %}
            <section class="hero-section">
                <div class="hero-content">
                    <h1>Продавайте ненужное,<br><span class="green-text">Покупайте что-то нужное.</span></h1>
                    <p>Быстрая, безопасная и легкая платформа для каждого.</p>
                    <a href={% url "users:login" %} class="btn btn-primary btn-large" >Начать сейчас</button></a>
                </div>
            </section>
        {% endif %}
        
        <!-- Сетка: Сайдбар + Товары -->
        <div class="main-layout">
            
            <!-- Левая колонка (Фильтры) -->
            <aside class="sidebar">
                <h3>Цена</h3>
                <div class="price-inputs">
                    <input type="number" placeholder="От">
                    <input type="number" placeholder="До">
                </div>
            </aside>

            <!-- Правая колонка (Товары) -->
            <div class="content-area">
                <div class="catalog-header">
                    <h2>Рекомендации для Вас</h2>
                    <button class="sort-button" onclick="toggleSortMenu()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#141B34" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M7 4V20"/>
                            <path d="M17 19L17 4"/>
                            <path d="M10 6.99998C10 6.99998 7.79053 4.00001 6.99998 4C6.20942 3.99999 4 7 4 7"/>
                            <path d="M20 17C20 17 17.7905 20 17 20C16.2094 20 14 17 14 17"/>
                        </svg>
                        <span id="currentSort">Сначала новые</span>
                    </button>
                    <div class="sort-dropdown" id="sortDropdown">
                        <div class="sort-option" onclick="selectSort('Сначала новые')">Сначала новые</div>
                        <div class="sort-option" onclick="selectSort('Сначала дешевые')">Сначала дешевые</div>
                        <div class="sort-option"onclick="selectSort('Сначала дорогие')">Сначала дорогие</div>
                    </div>
                </div>
                <div class="products-grid">
                    {% for product in  products %}
                    <div class="product-card">
                        <div class="image-placeholder">
                            {% if product.get_first_picture %}
                                <img src="{{ product.get_first_picture.url }}" width="200px"; height="200px">
                            {% endif %}
                        </div>
                        <div class="card-info">
                        
                            <!-- <p>{{product.name}}</p>
                            <p>{{product.price}}</p>
                            <p>{{product.description|truncatechars:40}}</p> -->

                            <a href="">Подробнее</a>
                           
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>

    </main>

    <!-- ФУТЕР -->
    <footer class="site-footer">
        <div class="container">
        <div class="footer-content">
            <div class="footer-col">
                <div class="logo footer-logo">
                    <svg width="47" height="47" viewBox="0 0 47 47" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect width="47" height="47" rx="23.5" fill="#90C825"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M16.349 29.9668C16.8883 30.2385 17.25 30.6084 17.4769 31.0085L20.3644 36.4519H24.6348L22.8544 33.0955C22.7772 32.9892 22.7145 32.8719 22.6691 32.7462C22.6148 32.596 22.5852 32.434 22.5852 32.2651C22.5852 31.6642 22.9598 31.1508 23.4883 30.9453C23.6158 30.8957 23.7522 30.8641 23.8945 30.8534C23.9039 30.8527 23.9135 30.8521 23.923 30.8516C26.7757 30.1762 29.2034 28.4031 30.7346 26.0032C30.7833 25.9072 30.8245 25.8073 30.8653 25.7083C30.9668 25.4622 31.0659 25.2217 31.2727 25.0614C31.4082 24.9564 31.5633 24.8754 31.7316 24.8248C31.861 24.7859 31.9982 24.765 32.1403 24.765C32.2174 24.765 32.293 24.7711 32.3667 24.783C32.7095 24.838 33.0112 25.0159 33.2251 25.2701C33.2938 25.3518 33.3535 25.4413 33.4025 25.5372L40.1675 35.7216L35.6723 24.7141C35.6112 24.6073 35.5635 24.4918 35.5318 24.3699C35.502 24.2556 35.4861 24.1356 35.4861 24.012C35.4861 23.6644 35.6114 23.3461 35.8194 23.0997C35.8606 23.0509 35.9051 23.0049 35.9524 22.962C36.9346 21.9123 37.5358 20.5021 37.5358 18.9516C37.5358 15.7078 34.9042 13.0781 31.658 13.0781C31.5007 13.0781 31.3522 13.1083 31.204 13.1385C31.0564 13.1686 30.9091 13.1986 30.7537 13.1986C30.6828 13.1986 30.613 13.1933 30.5448 13.1833C30.2894 13.1455 30.0561 13.0397 29.8642 12.8847C29.787 12.8225 29.7309 12.7507 29.6707 12.6735C29.6327 12.6249 29.593 12.5741 29.5454 12.5223C27.5123 10.3089 24.593 8.92139 21.3493 8.92139C15.2065 8.92139 10.2268 13.8976 10.2268 20.036C10.2268 22.7794 10.2419 25.5252 10.2569 28.2714C10.272 31.0185 10.2871 33.7661 10.2871 36.5121H14.4467V28.7519C15.0354 29.218 15.6724 29.6259 16.349 29.9668ZM31.5134 20.6021C31.1756 20.5729 30.8879 20.4276 30.5427 20.4276C29.4152 20.4276 28.4449 21.1 28.0114 22.0655C27.963 22.2243 27.909 22.3808 27.8498 22.5346C27.7661 22.7518 27.6719 22.9637 27.5677 23.1697C26.4206 25.4384 24.0667 26.9939 21.3493 26.9939C20.7031 26.9939 20.0774 26.906 19.4837 26.7413C17.2098 26.1109 15.4037 24.3564 14.7024 22.1143C14.5855 21.7407 14.4993 21.3535 14.4467 20.9557C14.407 20.6548 14.3865 20.3478 14.3865 20.036C14.3865 19.9958 14.3868 19.9556 14.3875 19.9155C14.4518 16.1283 17.5441 13.0781 21.3493 13.0781C23.5438 13.0781 25.5011 14.0925 26.7773 15.6777C26.923 15.8586 27.0598 16.047 27.1871 16.2422C27.2868 16.3951 27.3806 16.5521 27.4683 16.7129C27.9734 17.395 28.7844 17.8372 29.6988 17.8372C30.0059 17.8372 30.3014 17.7873 30.5775 17.6951C30.8537 17.603 31.0219 17.3967 31.2898 17.336C31.4082 17.3092 31.5315 17.295 31.658 17.295C31.8292 17.295 31.9943 17.3209 32.1496 17.369C32.8252 17.5784 33.3158 18.2077 33.3158 18.9516C33.3158 19.5734 32.9731 20.1152 32.4661 20.3985C32.227 20.5321 31.9514 20.6083 31.658 20.6083C31.6093 20.6083 31.5611 20.6062 31.5134 20.6021Z" fill="#2D2C28"/>
                    </svg>
                    <span>RiviKiwi</span>
                </div>
                <p class="footer-desc">Надежная торговая площадка для покупок и продаж на местном уровне. Безопасные транзакции и проверенные пользователи.</p>
            </div>
            <div class="footer-col">
                <h3>О нас</h3>
                <a href="#">Чем занимаемся</a>
                <a href="#">Вакансии</a>
                <a href="#">Новости</a>
            </div>
            <div class="footer-col">
                <h3>Поддержка</h3>
                <a href="#">Помощь по сайту</a>
                <a href="#">Правила пользования</a>
                <a href="#">Связаться с нами</a>
            </div>
        </div>
        </div>
    </footer>

</body>
</html>
