{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Избранное — RiviKiwi</title>

    <link rel="icon" href="{% static 'assets/images/icons/rivikiwi-logo.svg' %}">
    <link rel="stylesheet" href="{% static 'assets/css/main-page-style.css' %}">

    <script src="https://unpkg.com/lucide@latest"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
        });
    </script>
    <script src="{% static 'assets/js/main-page-scripts.js' %}" defer></script>
    <script src="{% static 'assets/js/favorites.js' %}" defer></script>
</head>
<body>

<!-- ===== HEADER ===== -->
<header class="site-header">
    <div class="container header-top">
        <a href="{% url "catalog:home" %}" class="logo">
            <span class="logo-text">Rivi<span class="green-text">Kiwi</span></span>
        </a>
        {% if not user.is_authenticated %}
        <a href="{% url 'users:login' %}" class="btn btn-primary">
            <svg width="15" height="18" viewBox="0 0 15 18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14 17C14 13.5636 11.0899 10.7778 7.5 10.7778C3.91015 10.7778 1 13.5636 1 17M7.5 8.11111C5.44866 8.11111 3.78571 6.51924 3.78571 4.55556C3.78571 2.59188 5.44866 1 7.5 1C9.55131 1 11.2143 2.59188 11.2143 4.55556C11.2143 6.51924 9.55131 8.11111 7.5 8.11111Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>Войти</span>
        </a>
        {% else %}
            <div class="account-wrapper" onclick="showAccountMenu()">
                <svg width="15" height="18" viewBox="0 0 15 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M14 17C14 13.5636 11.0899 10.7778 7.5 10.7778C3.91015 10.7778 1 13.5636 1 17M7.5 8.11111C5.44866 8.11111 3.78571 6.51924 3.78571 4.55556C3.78571 2.59188 5.44866 1 7.5 1C9.55131 1 11.2143 2.59188 11.2143 4.55556C11.2143 6.51924 9.55131 8.11111 7.5 8.11111Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <div class="account-dropdown" id="accountDropdown">
                    <span class="account-name">
                        <h3>{{ user.username }}</h3>
                    </span>
                    <div class="acc-menu-options">
                        <a href="{% url "users:self_profile" %}" class="account-option">Профиль</a>
                        <a href="{% url "catalog:home" %}" class="account-option">Главная страница</a>
                    {% if user.is_staff or user.is_admin %}
                        <a href="{% url 'admin:index' %}" class="account-option">Админ-панель</a>
                    {% endif %}
                    </div>
                    <form action="{% url 'users:logout' %}" method="post" class="exit-option">
                        {% csrf_token %}
                        <button type="submit" class="account-option">Выйти</button>
                    </form>
            </div>
        {% endif %}
        </div>
    
</header>

<!-- ===== MAIN ===== -->
<main class="container">

    <div class="catalog-header">
        <h2>Избранные товары</h2>
    </div>

    <div class="products-grid">

        <!-- ===== CARD ===== -->
        {% for item in wishlist %}
            {% with product=item.product %}
                {% include 'includes/card.html' %}
            {% endwith %}
        {% endfor %}
        

    </div>
</main>

<!-- ===== FOOTER ===== -->
<footer class="footer">
    <div class="container">
        <div class="grid-4">

            <div class="footer-brand">
                <span class="logo-text-footer">RiviKiwi</span>
                <p class="footer-copy">
                    © 2026 RiviKiwi.<br>Все права защищены.
                </p>
            </div>

            <div>
                <h4 class="footer-title">Компания</h4>
                <ul class="footer-links">
                    <li><a href="#">О нас</a></li>
                    <li><a href="#">Новости</a></li>
                </ul>
            </div>

            <div>
                <h4 class="footer-title">Поддержка</h4>
                <ul class="footer-links">
                    <li><a href="#">Помощь</a></li>
                    <li><a href="#">Правила</a></li>
                </ul>
            </div>

            <div>
                <h4 class="footer-title">Мы в соцсетях</h4>
                <div class="social-links">
                    <a href="#" class="social-icon"><i data-lucide="instagram"></i></a>
                    <a href="#" class="social-icon"><i data-lucide="facebook"></i></a>
                </div>
            </div>

        </div>
    </div>
</footer>

</body>
</html>